{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "EJB",
  "scopeName": "text.html.ejb",
  "patterns": [
    { "include": "#ejb-directives" },
    { "include": "#ejb-expressions" },
    { "include": "text.html.basic" }
  ],
  "repository": {
    "ejb-directives": {
      "patterns": [
        { "include": "#directive-block-js" },
        { "include": "#directive-block-css" },
        { "include": "#directive-block-html" },
        { "include": "#directive-with-params" },
        { "include": "#directive-simple" }
      ]
    },
    "directive-block-js": {
      "name": "meta.directive.code.ejb",
      "begin": "(@)(code)\b",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "end": "(@)(end)\b",
      "endCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "contentName": "source.js.embedded.ejb",
      "patterns": [{ "include": "source.js" }]
    },
    "directive-block-css": {
      "name": "meta.directive.css.ejb",
      "begin": "(@)(push)\b",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "end": "(@)(end)\b",
      "endCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "contentName": "source.css.embedded.ejb",
      "patterns": [{ "include": "source.css" }]
    },
    "directive-block-html": {
      "name": "meta.directive.html.ejb",
      "begin": "(@)(component|define)\b",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "end": "(@)(end)\b",
      "endCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      },
      "contentName": "text.html.basic.embedded.ejb",
      "patterns": [{ "include": "text.html.basic" }]
    },
    "directive-with-params": {
      "name": "meta.directive.with-params.ejb",
      "begin": "(@)(if|for|switch|import|stack|defined|isset|elseif|case|slot)\s*(\")",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" },
        "3": { "name": "punctuation.parenthesis.begin.ejb" }
      },
      "end": "\\)",
      "endCaptures": { "0": { "name": "punctuation.parenthesis.end.ejb" } },
      "contentName": "source.js.embedded.ejb",
      "patterns": [{ "include": "source.js" }]
    },
    "directive-simple": {
      "name": "meta.directive.simple.ejb",
      "match": "(@)(end|else|default|once)\b",
      "captures": {
        "1": { "name": "punctuation.definition.directive.ejb" },
        "2": { "name": "keyword.control.directive.ejb" }
      }
    },
    "ejb-expressions": {
      "name": "meta.expression.ejb",
      "begin": "\\{\\{ ",
      "end": "\\}\\} ",
      "beginCaptures": { "0": { "name": "punctuation.definition.expression.begin.ejb" } },
      "endCaptures": { "0": { "name": "punctuation.definition.expression.end.ejb" } },
      "contentName": "source.js.embedded.ejb",
      "patterns": [{ "include": "source.js" }]
    }
  }
}